import{j as t,a as l}from"./index-FLdvt5S5.js";import{b as r}from"./react-vendor-AZ7bSPkM.js";import"./axios-vendor-R-lXtGyY.js";const b=()=>{const[c,i]=r.useState([]),[n,s]=r.useState(""),[e,a]=r.useState(!1),d=async()=>{a(!0),s(""),i([]);try{const{data:o}=await l.post("/conflictos-horario/detectar");o&&o.conflictos&&Array.isArray(o.conflictos)?(i(o.conflictos),s(`Se detectaron ${o.conflictos.length} conflicto(s).`)):s("No se pudo obtener la información de conflictos.")}catch{s("Error al detectar conflictos.")}finally{a(!1)}},f=async()=>{a(!0),s("");try{const{data:o}=await l.post("/conflictos-horario/validar",{conflictos:c});o&&typeof o.valido<"u"?s(o.valido?"No hay conflictos por resolver.":"Validación completada. Hay conflictos por resolver."):s("No se pudo validar los conflictos.")}catch{s("Error al validar los conflictos.")}finally{a(!1)}},h=async()=>{a(!0),s("");try{const{data:o}=await l.post("/conflictos-horario/resolver",{conflictos:c});o&&o.resuelto?(i([]),s("Todos los conflictos han sido resueltos y confirmados.")):s("No se pudo resolver los conflictos.")}catch{s("Error al resolver los conflictos.")}finally{a(!1)}},u=async()=>{a(!0),s("");try{const{data:o}=await l.post("/conflictos-horario/notificar-resultado",{conflictos:c});o&&o.notificado?s("Resultado notificado correctamente."):s("No se pudo notificar el resultado.")}catch{s("Error al notificar el resultado.")}finally{a(!1)}};return t.jsxs("div",{className:"conflictos-container",children:[t.jsx("h2",{children:"CU12 – Gestionar conflictos de horario"}),t.jsxs("div",{className:"acciones-conflictos",children:[t.jsx("button",{className:"btn btn-primary",onClick:d,disabled:e,children:"Detectar Conflictos"}),t.jsx("button",{className:"btn btn-warning",onClick:f,disabled:e||c.length===0,children:"Validar Conflictos"}),t.jsx("button",{className:"btn btn-success",onClick:h,disabled:e||c.length===0,children:"Resolver y Confirmar"}),t.jsx("button",{className:"btn btn-info",onClick:u,disabled:e||c.length===0,children:"Notificar Resultado"})]}),t.jsx("div",{className:"resultado-conflictos",children:n&&t.jsx("p",{children:n})}),t.jsxs("div",{className:"lista-conflictos",children:[t.jsx("h4",{children:"Conflictos Detectados"}),c.length===0?t.jsx("p",{children:"No hay conflictos detectados."}):t.jsx("ul",{children:c.map(o=>t.jsx("li",{children:o.descripcion},o.id))})]})]})};export{b as default};
