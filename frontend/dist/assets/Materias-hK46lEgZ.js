import{a as d,j as e}from"./index-FLdvt5S5.js";import{b as r}from"./react-vendor-AZ7bSPkM.js";/* empty css             */import"./axios-vendor-R-lXtGyY.js";function F(){const[x,b]=r.useState([]),[g,j]=r.useState(!0),[m,o]=r.useState(!1),[i,h]=r.useState(null),[p,t]=r.useState(null),[s,c]=r.useState({nombre_mat:"",codigo_mat:"",tipo:"",nivel:"",horas_semanales:""});r.useEffect(()=>{u()},[]);const u=async()=>{try{j(!0);const a=await d.get("/materias");b(a.data.data||a.data||[]),t(null)}catch(a){t("Error al cargar las materias"),console.error("Error:",a)}finally{j(!1)}},n=a=>{const{name:l,value:E}=a.target;c({...s,[l]:E})},v=async a=>{a.preventDefault();try{i?(await d.put(`/materias/${i}`,s),t(null)):(await d.post("/materias",s),t(null)),c({nombre_mat:"",codigo_mat:"",tipo:"",nivel:"",horas_semanales:""}),h(null),o(!1),u()}catch(l){t("Error al guardar la materia"),console.error("Error:",l)}},_=a=>{c({nombre_mat:a.nombre_mat,codigo_mat:a.codigo_mat,tipo:a.tipo||"",nivel:a.nivel||"",horas_semanales:a.horas_semanales||""}),h(a.codigo_mat),o(!0)},f=async a=>{if(window.confirm("¿Está seguro de que desea eliminar esta materia?"))try{await d.delete(`/materias/${a}`),t(null),u()}catch(l){t("Error al eliminar la materia"),console.error("Error:",l)}},N=()=>{c({nombre_mat:"",codigo_mat:"",tipo:"",nivel:"",horas_semanales:""}),h(null),o(!1)};return g?e.jsx("div",{className:"loading",children:"Cargando materias..."}):e.jsxs("div",{className:"crud-container",children:[e.jsxs("div",{className:"crud-header",children:[e.jsx("h1",{children:"Gestión de Materias"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>o(!m),children:m?"Cancelar":"Nueva Materia"})]}),p&&e.jsx("div",{className:"alert alert-danger",children:p}),m&&e.jsxs("form",{onSubmit:v,className:"crud-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre_mat",children:"Nombre de la Materia *"}),e.jsx("input",{type:"text",id:"nombre_mat",name:"nombre_mat",value:s.nombre_mat,onChange:n,required:!0,placeholder:"Ej: Matemática I, Física General"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"codigo_mat",children:"Código *"}),e.jsx("input",{type:"text",id:"codigo_mat",name:"codigo_mat",value:s.codigo_mat,onChange:n,required:!0,placeholder:"Ej: MAT-101",disabled:!!i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tipo",children:"Tipo"}),e.jsx("input",{type:"text",id:"tipo",name:"tipo",value:s.tipo,onChange:n,placeholder:"Ej: Obligatoria, Electiva"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nivel",children:"Nivel"}),e.jsx("input",{type:"number",id:"nivel",name:"nivel",value:s.nivel,onChange:n,min:"1",placeholder:"Ej: 1, 2, 3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"horas_semanales",children:"Horas Semanales"}),e.jsx("input",{type:"number",id:"horas_semanales",name:"horas_semanales",value:s.horas_semanales,onChange:n,min:"0",placeholder:"Ej: 4"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"submit",className:"btn btn-success",children:[i?"Actualizar":"Crear"," Materia"]}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:N,children:"Cancelar"})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"crud-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Código"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Tipo"}),e.jsx("th",{children:"Nivel"}),e.jsx("th",{children:"Horas Semanales"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:x.length>0?x.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.codigo_mat}),e.jsx("td",{children:a.nombre_mat}),e.jsx("td",{children:a.tipo||"-"}),e.jsx("td",{children:a.nivel||"-"}),e.jsx("td",{children:a.horas_semanales||"-"}),e.jsxs("td",{className:"actions",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>_(a),children:"Editar"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>f(a.codigo_mat),children:"Eliminar"})]})]},a.codigo_mat)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No hay materias registradas"})})})]})})]})}export{F as default};
